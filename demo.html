<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

	<title>dmSuggest Demo Page</title>

	<link rel="stylesheet" type="text/css" href="css/jsonSuggest.css" />
	
</head>

<body>
	<label for="search">Search</label> <input type="text" name="search" value="" id="search">

<script type="text/javascript" language="Javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script src="js/jquery.jsonSuggest.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript" charset="utf-8">
	$('input#search').jsonSuggest(
		function(text, wildCard, caseSensitive, notCharacter) {
			
			var results = {};
			results.url = "/api/1/vocabulary/suggest.jsonp?CISOFIELD1=title&CISOROOT=/hughes&CISOBOX1=" + text;	
			
			function makeCall() {
				$.ajax({
				  url: results.url,
				  dataType: "jsonp",
				  success: function (data) {
					results.suggestions = [];
					for (var i = 0, j = data.dmBridgeResponse.vocabulary.length; i < j; i++) {
						results.suggestions[i] = {text: data.dmBridgeResponse.vocabulary[i]};
				    }
				  }
				});
				
				return results.suggestions;
			}
			
			return makeCall();
			
			/* $.ajax({
			  url: results.url,
			  dataType: "jsonp",
			async: false,
			  success: function (data) {
				results.suggestions = [];
				for (var i = 0, j = data.dmBridgeResponse.vocabulary.length; i < j; i++) {
					results.suggestions[i] = {text: data.dmBridgeResponse.vocabulary[i]};
			    }
			    
			  }
			});

			return results.suggestions; */
			
		}, {ajaxResults:true});
	
</script>
</body>
</html>